/* ==========================================================================
   Search page – component styles
   Imported in globals.css via @import or loaded by cerca/page.tsx
   ========================================================================== */

/* ==========================================================================
   Wizard card – 3D floating deck transitions
   ========================================================================== */
.wizard-card {
  @apply relative bg-white rounded-2xl shadow-xl border border-gray-200/80 p-6 md:p-8;
  transform-style: preserve-3d;
  backface-visibility: hidden;
  will-change: transform, opacity;
  transition: transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1),
              opacity 0.25s ease;
}

/* ---------- Filter bar ---------- */
.filter-bar {
  @apply flex items-center gap-2 overflow-x-auto py-1;
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.filter-bar::-webkit-scrollbar {
  display: none;
}

/* Single filter pill (idle) */
.filter-pill {
  @apply relative shrink-0 flex items-center gap-1.5 px-4 py-2
         rounded-full border border-gray-200 bg-white
         text-sm font-medium text-gray-700
         cursor-pointer select-none whitespace-nowrap
         transition-all duration-150;
}
.filter-pill:hover {
  @apply border-sky-300 bg-sky-50 text-sky-700;
}

/* Active pill – a filter value is set */
.filter-pill--active {
  @apply border-sky-500 bg-sky-50 text-sky-700 font-semibold;
}

/* Clear button inside active pill */
.filter-pill__clear {
  @apply ml-0.5 p-0.5 rounded-full hover:bg-sky-200 transition-colors;
}

/* "Reset all" pill */
.filter-pill--reset {
  @apply border-gray-200 bg-white text-gray-500;
}
.filter-pill--reset:hover {
  @apply border-red-300 bg-red-50 text-red-600;
}

/* ---------- Inline dropdown (appears below a pill) ---------- */
.filter-dropdown {
  @apply absolute top-full left-0 mt-2 z-50
         bg-white rounded-xl shadow-xl border border-gray-100
         p-3 min-w-[200px];
  animation: filter-dropdown-in 0.12s ease-out;
}

@keyframes filter-dropdown-in {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.filter-dropdown__label {
  @apply block text-xs font-semibold text-gray-400 uppercase tracking-wide mb-2;
}

.filter-dropdown__input {
  @apply w-full px-3 py-2 rounded-lg border border-gray-200 text-sm
         focus:outline-none focus:ring-2 focus:ring-sky-400 focus:border-transparent;
}

.filter-dropdown__row {
  @apply flex items-center gap-2;
}

.filter-dropdown__option {
  @apply block w-full text-left px-3 py-2 rounded-lg text-sm text-gray-700
         hover:bg-sky-50 hover:text-sky-700 transition-colors;
}
.filter-dropdown__option--active {
  @apply bg-sky-100 text-sky-700 font-semibold;
}

/* Toggle chip inside dropdown */
.filter-chip {
  @apply px-3 py-1.5 rounded-full text-xs font-medium border transition-colors cursor-pointer;
}
.filter-chip--off {
  @apply bg-white text-gray-600 border-gray-200 hover:border-sky-300;
}
.filter-chip--on {
  @apply bg-sky-600 text-white border-sky-600;
}

/* ---------- Search content layout ---------- */
.search-page {
  @apply h-[calc(100vh-4rem)] flex flex-col;
}

.search-filter-bar {
  @apply bg-white/80 backdrop-blur-sm border-b border-gray-100 px-4 py-2;
}

.search-content {
  @apply flex-1 flex flex-col overflow-hidden;
}

.search-mobile-toggle {
  @apply flex items-center justify-center px-4 py-2 bg-white border-b;
}

.search-mobile-btn {
  @apply flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors;
}
.search-mobile-btn--active {
  @apply bg-white text-sky-600 shadow-sm;
}
.search-mobile-btn--inactive {
  @apply text-gray-500;
}

.search-split {
  @apply flex-1 flex overflow-hidden;
}

.search-list-pane {
  @apply w-full lg:w-1/2 overflow-y-auto p-4 bg-gray-50;
}

.search-map-pane {
  @apply w-full lg:w-1/2 relative;
}

/* ---------- Map ---------- */
.map-loading {
  @apply h-full bg-gray-50 flex items-center justify-center;
}

.map-spinner {
  @apply w-8 h-8 border-2 border-gray-200 border-t-sky-500 rounded-full animate-spin;
}

/* Price badge marker */
.map-price-badge {
  background: #fff;
  color: #334155;
  font-weight: 700;
  font-size: 12px;
  padding: 3px 8px;
  border-radius: 6px;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.12), 0 0 0 1px rgba(0, 0, 0, 0.04);
  white-space: nowrap;
  text-align: center;
  transition: all 0.15s ease;
  cursor: pointer;
}
.map-price-badge:hover,
.map-price-badge--active {
  background: #0284c7;
  color: #fff;
  box-shadow: 0 2px 8px rgba(2, 132, 199, 0.35);
  transform: scale(1.08);
}

/* Popup overrides */
.map-popup-root .leaflet-popup-content-wrapper {
  border-radius: 12px;
  padding: 0;
  overflow: hidden;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  border: 1px solid rgba(0, 0, 0, 0.05);
}
.map-popup-root .leaflet-popup-content {
  margin: 0;
  min-width: 200px;
}
.map-popup-root .leaflet-popup-tip {
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
}

.map-popup-img {
  @apply w-full h-28 object-cover;
}

.map-popup-body {
  @apply px-3 py-2.5;
}

.map-popup-title {
  @apply font-semibold text-gray-800 text-sm leading-snug truncate;
}
.map-popup-title:hover {
  @apply text-sky-600;
}
.map-popup-subtitle {
  @apply text-xs text-gray-400 mt-0.5;
}
.map-popup-footer {
  @apply flex items-center justify-between mt-1.5;
}
.map-popup-price {
  @apply text-sky-600 font-bold text-sm;
}
.map-popup-price-unit {
  @apply text-xs font-normal text-gray-400 ml-0.5;
}
.map-popup-type {
  @apply text-xs text-gray-400 bg-gray-50 px-2 py-0.5 rounded;
}

/* Listing count overlay */
.map-count-badge {
  @apply absolute bottom-4 left-4 z-[1000]
         bg-white/90 backdrop-blur-sm text-gray-600
         text-xs font-medium
         px-3 py-1.5 rounded-lg
         shadow-sm border border-gray-100;
}

/* Leaflet UI tweaks for cleaner look */
.leaflet-control-zoom {
  border: none !important;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1) !important;
  border-radius: 8px !important;
  overflow: hidden;
}
.leaflet-control-zoom a {
  background: #fff !important;
  color: #64748b !important;
  width: 32px !important;
  height: 32px !important;
  line-height: 32px !important;
  font-size: 16px !important;
  border: none !important;
  border-bottom: 1px solid #f1f5f9 !important;
}
.leaflet-control-zoom a:hover {
  background: #f8fafc !important;
  color: #0284c7 !important;
}
.leaflet-control-zoom a:last-child {
  border-bottom: none !important;
}

/* Hide default attribution styling noise */
.leaflet-control-attribution {
  background: rgba(255, 255, 255, 0.7) !important;
  font-size: 9px !important;
  padding: 2px 6px !important;
  border-radius: 4px 0 0 0 !important;
}

/* ==========================================================================
   Swipe Card Stack – 3D floating deck
   ========================================================================== */

/* ── Wrapper ── */
.swipe-stack-wrapper {
  @apply flex flex-col items-center justify-center h-full w-full
         select-none overflow-hidden;
  padding: 0.5rem 1rem 0;
}

/* ── Counter ── */
.swipe-stack-counter {
  @apply text-sm mb-2 text-center;
}

/* ── Stack container ── */
.swipe-stack-container {
  @apply relative flex-1 w-full max-w-md flex items-center justify-center;
  min-height: 0;
}

.swipe-stack-perspective {
  perspective: 1200px;
  perspective-origin: 50% 50%;
  @apply relative w-full;
  aspect-ratio: 3 / 4.2;
  max-height: calc(100vh - 16rem);
}

/* ── Individual card ── */
.swipe-card {
  @apply absolute inset-0 rounded-3xl bg-white overflow-hidden;
  box-shadow:
    0 4px 20px rgba(0, 0, 0, 0.08),
    0 1px 4px rgba(0, 0, 0, 0.04),
    0 0 0 1px rgba(0, 0, 0, 0.03);
  transform-style: preserve-3d;
  backface-visibility: hidden;
  will-change: transform, opacity;
  user-select: none;
  -webkit-user-drag: none;
}

.swipe-card--active {
  box-shadow:
    0 8px 40px rgba(0, 0, 0, 0.12),
    0 2px 8px rgba(0, 0, 0, 0.06),
    0 0 0 1px rgba(0, 0, 0, 0.04);
}

/* ── Skeleton ── */
.swipe-card--skeleton {
  @apply animate-pulse;
}
.swipe-card__img-skeleton {
  @apply w-full bg-gray-200;
  height: 55%;
}
.swipe-card__body-skeleton {
  @apply p-5;
}
.skeleton-line {
  @apply bg-gray-200 rounded-md;
}

/* ── Swipe feedback overlays ── */
.swipe-card__overlay {
  @apply absolute inset-0 z-20 flex flex-col items-center justify-center
         rounded-3xl pointer-events-none;
  backdrop-filter: blur(2px);
  transition: opacity 0.1s ease;
}
.swipe-card__overlay span {
  @apply text-2xl font-extrabold tracking-wider mt-2;
}

.swipe-card__overlay--like {
  background: rgba(16, 185, 129, 0.15);
  border: 3px solid rgba(16, 185, 129, 0.5);
  color: #059669;
}
.swipe-card__overlay--skip {
  background: rgba(239, 68, 68, 0.15);
  border: 3px solid rgba(239, 68, 68, 0.5);
  color: #dc2626;
}

/* ── Image section ── */
.swipe-card__image {
  @apply relative w-full overflow-hidden;
  height: 55%;
}
.swipe-card__img {
  @apply w-full h-full object-cover;
  pointer-events: none;
}
.swipe-card__img-placeholder {
  @apply w-full h-full bg-gradient-to-br from-gray-100 to-gray-200
         flex items-center justify-center;
}

/* Image dots */
.swipe-card__dots {
  @apply absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-1.5 z-10;
}
.swipe-card__dot {
  @apply w-2 h-2 rounded-full bg-white/50 transition-all duration-200;
}
.swipe-card__dot--active {
  @apply bg-white w-5;
  border-radius: 999px;
}

/* Image nav arrows */
.swipe-card__img-nav {
  @apply absolute top-1/2 -translate-y-1/2 z-10
         w-8 h-8 flex items-center justify-center
         bg-black/20 hover:bg-black/40 text-white
         rounded-full backdrop-blur-sm transition-all;
}
.swipe-card__img-nav--left { @apply left-2; }
.swipe-card__img-nav--right { @apply right-2; }

/* Price badge */
.swipe-card__price-badge {
  @apply absolute bottom-3 right-3 z-10
         bg-white/95 backdrop-blur-sm
         px-3 py-1.5 rounded-xl
         text-xl font-extrabold text-sky-600
         shadow-lg;
}
.swipe-card__price-badge span {
  @apply text-xs font-normal text-gray-400 ml-0.5;
}

/* ── Body ── */
.swipe-card__body {
  @apply px-5 py-4 flex flex-col gap-2;
  height: 45%;
}

.swipe-card__title {
  @apply text-lg font-bold text-gray-800 leading-tight truncate;
}

.swipe-card__location {
  @apply text-sm text-gray-500 flex items-center gap-1 truncate;
}

/* Tags */
.swipe-card__tags {
  @apply flex flex-wrap gap-1.5 mt-1;
}
.swipe-card__tag {
  @apply inline-flex items-center gap-1 px-2.5 py-1
         bg-gray-100 text-gray-600
         rounded-full text-xs font-medium;
}
.swipe-card__tag--accent {
  @apply bg-blue-50 text-blue-600;
}

/* Footer */
.swipe-card__footer {
  @apply flex items-center gap-3 mt-auto pt-2 text-sm;
}
.swipe-card__roommates {
  @apply flex items-center gap-1 text-gray-500;
}
.swipe-card__available {
  @apply flex items-center gap-1 text-green-600 text-xs font-medium;
}
.swipe-card__detail-btn {
  @apply ml-auto flex items-center gap-1
         px-3 py-1.5 rounded-full
         bg-sky-50 text-sky-600 text-xs font-semibold
         hover:bg-sky-100 transition-colors;
}

/* ── Action buttons ── */
.swipe-stack-actions {
  @apply flex items-center justify-center gap-4 py-4;
}

.swipe-action-btn {
  @apply flex items-center justify-center rounded-full
         transition-all duration-200 active:scale-90
         shadow-md hover:shadow-lg;
}
.swipe-action-btn:disabled {
  @apply opacity-30 cursor-not-allowed shadow-none;
}

.swipe-action-btn--back {
  @apply w-11 h-11 bg-white text-gray-400 border border-gray-200
         hover:text-gray-600 hover:border-gray-300;
}

.swipe-action-btn--skip {
  @apply w-14 h-14 bg-white text-red-400 border-2 border-red-200
         hover:bg-red-50 hover:text-red-500 hover:border-red-300;
}

.swipe-action-btn--like {
  @apply w-14 h-14 bg-gradient-to-br from-pink-500 to-rose-500
         text-white border-0
         hover:from-pink-600 hover:to-rose-600
         shadow-pink-200;
}

.swipe-action-btn--detail {
  @apply w-11 h-11 bg-white text-sky-500 border border-sky-200
         hover:bg-sky-50 hover:text-sky-600 hover:border-sky-300;
}

/* ── Empty state ── */
.swipe-stack-empty {
  @apply flex flex-col items-center justify-center py-16;
}
.swipe-stack-empty__icon {
  @apply w-20 h-20 rounded-full bg-amber-50 flex items-center justify-center;
  animation: empty-bounce 2s ease-in-out infinite;
}
@keyframes empty-bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}

/* ── Floating animation for idle cards ── */
@keyframes card-float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}
.swipe-card--active:not(.swipe-card--dragging) {
  animation: card-float 3s ease-in-out infinite;
}
.swipe-card--dragging {
  animation: none !important;
}
